From 47896503a80f5754837117b4f96574c5f35f95b1 Mon Sep 17 00:00:00 2001
From: Julian Bouzas <julian.bouzas@collabora.com>
Date: Mon, 11 Oct 2021 03:08:34 -0400
Subject: [PATCH] modules: fix default audio format segfault

---
 modules/module-si-audio-adapter.c  | 2 +-
 modules/module-si-audio-endpoint.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/module-si-audio-adapter.c b/modules/module-si-audio-adapter.c
index a7eb62c7..57fb222b 100644
--- a/modules/module-si-audio-adapter.c
+++ b/modules/module-si-audio-adapter.c
@@ -264,7 +264,7 @@ build_adapter_format (WpSiAudioAdapter * self, guint32 format, gint channels,
   wp_spa_pod_builder_add_int (b, channels);
   if (position) {
     wp_spa_pod_builder_add_property (b, "position");
-    wp_spa_pod_builder_add_pod (b, pos);
+    wp_spa_pod_builder_add_pod (b, position);
   }
   return wp_spa_pod_builder_end (b);
 }
diff --git a/modules/module-si-audio-endpoint.c b/modules/module-si-audio-endpoint.c
index 2ffd7960..ac0a061f 100644
--- a/modules/module-si-audio-endpoint.c
+++ b/modules/module-si-audio-endpoint.c
@@ -471,7 +471,7 @@ build_endpoint_format (WpSiAudioEndpoint * self, guint32 format, gint channels,
   wp_spa_pod_builder_add_int (b, channels);
   if (position) {
     wp_spa_pod_builder_add_property (b, "position");
-    wp_spa_pod_builder_add_pod (b, pos);
+    wp_spa_pod_builder_add_pod (b, position);
   }
   return wp_spa_pod_builder_end (b);
 }
--
GitLab

